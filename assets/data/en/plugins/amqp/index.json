{"hash":"df738a6e6df73e70d9b82c9ba4d26c4f7cebeb11","data":{"doc":{"title":"AMQP steps","path":"/en/plugins/amqp/","date":"20. September 2022","content":"<p>A set of steps to interact with an application via the <a href=\"https://amqp.org\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Advanced Message Queuing Protocol</a>.\nThe underlying implementation is based on <a href=\"https://rabbitmq.com\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">RabbitMQ</a>, although it might change in further versions.</p>\n<p>Currently, this library provides very limited functionality and exists mostly as a proof of concept.</p>\n<p><strong>Configuration</strong>:</p>\n<ul>\n<li><a href=\"#amqpconnectionurl\"><code class=\"language-text\">amqp.connection.url</code></a></li>\n<li><a href=\"#amqpconnectionusername\"><code class=\"language-text\">amqp.connection.username</code></a></li>\n<li><a href=\"#amqpconnectionpassword\"><code class=\"language-text\">amqp.connection.password</code></a></li>\n<li><a href=\"#amqpqueuedurable\"><code class=\"language-text\">amqp.queue.durable</code></a></li>\n<li><a href=\"#amqpqueueexclusive\"><code class=\"language-text\">amqp.queue.exclusive</code></a></li>\n<li><a href=\"#amqpqueueautodelete\"><code class=\"language-text\">amqp.queue.autodelete</code></a></li>\n</ul>\n<p><strong>Steps</strong>:</p>\n<ul>\n<li><a href=\"#define-connection\">Define connection</a></li>\n<li><a href=\"#define-destination-queue\">Define destination queue</a></li>\n<li><a href=\"#send-message-to-queue\">Send message to queue</a></li>\n<li><a href=\"#send-message-to-queue-file\">Send message to queue (file)</a></li>\n<li><a href=\"#set-pause\">Set pause</a></li>\n<li><a href=\"#validate-message\">Validate message</a></li>\n<li><a href=\"#validate-message-file\">Validate message (file)</a></li>\n</ul>\n<h2 id=\"configuration\"><a href=\"#configuration\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Configuration</h2>\n<hr>\n<h3 id=\"amqpconnectionurl\"><a href=\"#amqpconnectionurl\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a><code class=\"language-text\">amqp.connection.url</code></h3>\n<p>Sets the URL to be used by the AMQP broker.</p>\n<p>Example:</p>\n<pre class=\"language-yaml\"><span class=\"token key atrule\">amqp</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">connection</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">url</span><span class=\"token punctuation\">:</span> amqp<span class=\"token punctuation\">:</span>//127.0.0.1<span class=\"token punctuation\">:</span><span class=\"token number\">5671</span></pre>\n<hr>\n<h3 id=\"amqpconnectionusername\"><a href=\"#amqpconnectionusername\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a><code class=\"language-text\">amqp.connection.username</code></h3>\n<p>Sets the username to be used by the AMQP broker.</p>\n<p>Example:</p>\n<pre class=\"language-yaml\"><span class=\"token key atrule\">amqp</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">connection</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">username</span><span class=\"token punctuation\">:</span> guest</pre>\n<hr>\n<h3 id=\"amqpconnectionpassword\"><a href=\"#amqpconnectionpassword\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a><code class=\"language-text\">amqp.connection.password</code></h3>\n<p>Sets the password to be used by the AMQP broker.</p>\n<p>Example:</p>\n<pre class=\"language-yaml\"><span class=\"token key atrule\">amqp</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">connection</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">password</span><span class=\"token punctuation\">:</span> guest</pre>\n<hr>\n<h3 id=\"amqpqueuedurable\"><a href=\"#amqpqueuedurable\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a><code class=\"language-text\">amqp.queue.durable</code></h3>\n<p>Sets whether the queue will be durable or not (the queue will survive a server reboot).</p>\n<p>Default value is <code class=\"language-text\">false</code>.</p>\n<p>Example:</p>\n<pre class=\"language-yaml\"><span class=\"token key atrule\">amqp</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">queue</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">durable</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"true\"</span></pre>\n<hr>\n<h3 id=\"amqpqueueexclusive\"><a href=\"#amqpqueueexclusive\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a><code class=\"language-text\">amqp.queue.exclusive</code></h3>\n<p>Establece si la cola será exclusiva (restringida a la conexión actual).</p>\n<p>Default value is <code class=\"language-text\">false</code>.</p>\n<p>Example:</p>\n<pre class=\"language-yaml\"><span class=\"token key atrule\">amqp</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">queue</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">exclusive</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"true\"</span></pre>\n<hr>\n<h3 id=\"amqpqueueautodelete\"><a href=\"#amqpqueueautodelete\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a><code class=\"language-text\">amqp.queue.autodelete</code></h3>\n<p>Sets whether to auto delete queue (will be deleted by server when no longer in use).</p>\n<p>Default value is <code class=\"language-text\">false</code>.</p>\n<p>Example:</p>\n<pre class=\"language-yaml\"><span class=\"token key atrule\">amqp</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">queue</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">autodelete</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"true\"</span></pre>\n<h2 id=\"steps\"><a href=\"#steps\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Steps</h2>\n<hr>\n<h3 id=\"define-connection\"><a href=\"#define-connection\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Define connection</h3>\n<pre class=\"language-text\">the AMQP connection URL {url} using the user {username} and the password {password}</pre>\n<p>Sets the URL and credentials to be used by the AMQP broker. This is the descriptive way of setting the configuration\nproperties <a href=\"#amqpconnectionurl\"><code class=\"language-text\">amqp.connection.url</code></a>, <a href=\"#amqpconnectionusername\"><code class=\"language-text\">amqp.connection.username</code></a>,\n<a href=\"#amqpconnectionpassword\"><code class=\"language-text\">amqp.connection.password</code></a>.</p>\n<h4 id=\"parameters\"><a href=\"#parameters\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Parameters</h4>\n<table>\n<thead>\n<tr>\n<th>Name</th>\n<th>Wakamiti type</th>\n<th>Description</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code class=\"language-text\">url</code></td>\n<td><code class=\"language-text\">text</code></td>\n<td>The broker URL</td>\n</tr>\n<tr>\n<td><code class=\"language-text\">username</code></td>\n<td><code class=\"language-text\">text</code></td>\n<td>The credentials username</td>\n</tr>\n<tr>\n<td><code class=\"language-text\">password</code></td>\n<td><code class=\"language-text\">text</code></td>\n<td>The credentials password</td>\n</tr>\n</tbody>\n</table>\n<h4 id=\"examples\"><a href=\"#examples\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Examples:</h4>\n<pre class=\"language-gherkin\">  <span class=\"token atrule\">Given</span> the AMQP connection URL <span class=\"token string\">'amqp://127.0.0.1:5671'</span> using the user <span class=\"token string\">'guest'</span> and the password <span class=\"token string\">'guest'</span></pre>\n<hr>\n<h3 id=\"define-destination-queue\"><a href=\"#define-destination-queue\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Define destination queue</h3>\n<pre class=\"language-text\">the destination queue {word}</pre>\n<p>Sets the name of the queue to watch.</p>\n<h4 id=\"parameters-1\"><a href=\"#parameters-1\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Parameters</h4>\n<table>\n<thead>\n<tr>\n<th>Name</th>\n<th>Wakamiti type</th>\n<th>Description</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code class=\"language-text\">word</code></td>\n<td><code class=\"language-text\">word</code></td>\n<td>A queue name</td>\n</tr>\n</tbody>\n</table>\n<h4 id=\"examples-1\"><a href=\"#examples-1\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Examples:</h4>\n<pre class=\"language-gherkin\">  <span class=\"token atrule\">Given</span> the destination queue TEST</pre>\n<hr>\n<h3 id=\"send-message-to-queue\"><a href=\"#send-message-to-queue\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Send message to queue</h3>\n<pre class=\"language-text\">the following JSON message is sent to the queue {word}:</pre>\n<p>Sends a JSON message to the given queue.</p>\n<h4 id=\"parameters-2\"><a href=\"#parameters-2\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Parameters</h4>\n<table>\n<thead>\n<tr>\n<th>Name</th>\n<th>Wakamiti type</th>\n<th>Description</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code class=\"language-text\">word</code></td>\n<td><code class=\"language-text\">word</code></td>\n<td>A queue name</td>\n</tr>\n<tr>\n<td></td>\n<td><code class=\"language-text\">document</code></td>\n<td>A JSON message body</td>\n</tr>\n</tbody>\n</table>\n<h4 id=\"examples-2\"><a href=\"#examples-2\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Examples:</h4>\n<pre class=\"language-gherkin\">  <span class=\"token atrule\">When</span> the following JSON message is sent to the queue TEST:\n    ```json\n    {\n        <span class=\"token string\">\"data\"</span>: {\n            <span class=\"token string\">\"message\"</span>: <span class=\"token string\">\"Test message sent\"</span>\n        }\n    }\n    ```</pre>\n<hr>\n<h3 id=\"send-message-to-queue-file\"><a href=\"#send-message-to-queue-file\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Send message to queue (file)</h3>\n<pre class=\"language-text\">the message from the JSON file {file} is sent to the queue {queue}</pre>\n<p>Sends a JSON message extracted from a local file to the given queue.</p>\n<h4 id=\"parameters-3\"><a href=\"#parameters-3\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Parameters</h4>\n<table>\n<thead>\n<tr>\n<th>Name</th>\n<th>Wakamiti type</th>\n<th>Description</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code class=\"language-text\">file</code></td>\n<td><code class=\"language-text\">file</code></td>\n<td>A local file with the JSON message</td>\n</tr>\n<tr>\n<td><code class=\"language-text\">queue</code></td>\n<td><code class=\"language-text\">word</code></td>\n<td>A queue name</td>\n</tr>\n</tbody>\n</table>\n<h4 id=\"examples-3\"><a href=\"#examples-3\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Examples:</h4>\n<pre class=\"language-gherkin\">  <span class=\"token atrule\">When</span> the message from the JSON file <span class=\"token string\">'data/message.json'</span> is sent to the queue TEST</pre>\n<hr>\n<h3 id=\"set-pause\"><a href=\"#set-pause\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Set pause</h3>\n<pre class=\"language-text\">wait for {integer} second(s)</pre>\n<p>Waits a fixed number of seconds (usually to ensure a message has been processed).</p>\n<h4 id=\"parameters-4\"><a href=\"#parameters-4\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Parameters</h4>\n<table>\n<thead>\n<tr>\n<th>Name</th>\n<th>Wakamiti type</th>\n<th>Description</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code class=\"language-text\">integer</code></td>\n<td><code class=\"language-text\">integer</code></td>\n<td>Amount of time (in seconds)</td>\n</tr>\n</tbody>\n</table>\n<h4 id=\"examples-4\"><a href=\"#examples-4\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Examples:</h4>\n<pre class=\"language-gherkin\">  * Wait for 2 seconds</pre>\n<hr>\n<h3 id=\"validate-message\"><a href=\"#validate-message\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Validate message</h3>\n<pre class=\"language-text\">the following JSON message is received within {integer} seconds:</pre>\n<p>Validates that a specific JSON message is received in the destination queue, failing after a certain timeout.</p>\n<h4 id=\"parameters-5\"><a href=\"#parameters-5\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Parameters</h4>\n<table>\n<thead>\n<tr>\n<th>Name</th>\n<th>Wakamiti type</th>\n<th>Description</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code class=\"language-text\">integer</code></td>\n<td><code class=\"language-text\">integer</code></td>\n<td>Amount of time (in seconds)</td>\n</tr>\n<tr>\n<td></td>\n<td><code class=\"language-text\">document</code></td>\n<td>A JSON message body</td>\n</tr>\n</tbody>\n</table>\n<h4 id=\"examples-5\"><a href=\"#examples-5\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Examples:</h4>\n<pre class=\"language-gherkin\">  <span class=\"token atrule\">Then</span> the following JSON message is received within 5 seconds:\n    ```json\n      {\n        <span class=\"token string\">\"data\"</span>: {\n          <span class=\"token string\">\"message\"</span>: <span class=\"token string\">\"Test message sent\"</span>\n        }\n      }</pre>\n<hr>\n<h3 id=\"validate-message-file\"><a href=\"#validate-message-file\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Validate message (file)</h3>\n<pre class=\"language-text\">the message from the JSON file {file} is received within {seconds} seconds</pre>\n<p>Validates that a specific JSON message is received in the destination queue, failing after a certain timeout.</p>\n<h4 id=\"parameters-6\"><a href=\"#parameters-6\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Parameters</h4>\n<table>\n<thead>\n<tr>\n<th>Name</th>\n<th>Wakamiti type</th>\n<th>Description</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code class=\"language-text\">file</code></td>\n<td><code class=\"language-text\">file</code></td>\n<td>A local file with the JSON message</td>\n</tr>\n<tr>\n<td></td>\n<td><code class=\"language-text\">integer</code></td>\n<td>Amount of time (in seconds)</td>\n</tr>\n</tbody>\n</table>\n<h4 id=\"examples-6\"><a href=\"#examples-6\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Examples:</h4>\n<pre class=\"language-gherkin\">  <span class=\"token atrule\">Then</span> the message from the JSON file <span class=\"token string\">'data/message.json'</span> is received within 5 seconds</pre>\n"}},"context":{"id":"8126c7d19d6720c23b6c1ee06f83287b","path":"/en/plugins/amqp/","locale":"en"}}