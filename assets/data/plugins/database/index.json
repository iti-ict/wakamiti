{"hash":"ed8ab4ac0effb0bac2bde60a1462a923227b185d","data":{"doc":{"title":"Pasos DB","path":"/plugins/database/","date":"20. September 2022","content":"\r\nEste plugin proporciona una serie de pasos para interactuar con una base de datos vía JDBC, facilitando la carga y\r\nvalidación de datos.\r\n\r\n> **RECUERDA** <br />\r\n> Debido a los muchos motores existentes de bases de datos, este plugin no incluye ningún driver específico. Esto\r\n> significa que, para funcionar correctamente, es necesario inluir el módulo con el controlador JDBC adecuado en la\r\n> configuración de kukumo.\r\n\r\n\r\n\r\n**Configuración**:\r\n- [`database.connection.url`](#databaseconnectionurl)\r\n- [`database.connection.username`](#databaseconnectionusername)\r\n- [`database.connection.password`](#databaseconnectionpassword)\r\n- [`database.metadata.schema`](#databasemetadataschema)\r\n- [`database.metadata.catalog`](#databasemetadatacatalog)\r\n- [`database.metadata.caseSensitivity`](#databasemetadatacasesensititvy)\r\n- [`database.csv.format`](#databasecsvformat)\r\n- [`database.nullSymbol`](#databasenullsymbol)\r\n- [`database.enableCleanupUponCompletion`](#databaseenablecleanupuponcompletion)\r\n\r\n**Pasos**:\r\n- [Definir conexión](#definir-conexi%C3%B3n)\r\n- [Definir script post ejecución](#definir-script-post-ejecuci%C3%B3n)\r\n- [Definir script post ejecución (fichero)](#definir-script-post-ejecuci%C3%B3n-fichero)\r\n- [Ejecutar script](#ejecutar-script)\r\n- [Ejecutar script (fichero)](#ejecutar-script-fichero)\r\n- [Vaciar tabla](#vaciar-tabla)\r\n- [Eliminar datos](#eliminar-datos)\r\n- [Eliminar datos (tabla)](#eliminar-datos-tabla)\r\n- [Eliminar datos (xls)](#eliminar-datos-xls)\r\n- [Eliminar datos (csv)](#eliminar-datos-csv)\r\n- [Insertar datos (tabla)](#insertar-datos-tabla)\r\n- [Insertar datos (xls)](#insertar-datos-xls)\r\n- [Insertar datos (csv)](#insertar-datos-csv)\r\n- [Comprobar existencia de datos](#comprobar-existencia-de-datos)\r\n- [Comprobar inexistencia de datos](#comprobar-inexistencia-de-datos)\r\n- [Comprobar existencia de datos (id)](#comprobar-existencia-de-datos-id)\r\n- [Comprobar inexistencia de datos (id)](#comprobar-inexistencia-de-datos-id)\r\n- [Comprobar existencia de datos (tabla)](#comprobar-existencia-de-datos-tabla)\r\n- [Comprobar inexistencia de datos (tabla)](#comprobar-inexistencia-de-datos-tabla)\r\n- [Comprobar existencia de datos (XLS)](#comprobar-existencia-de-datos-xls)\r\n- [Comprobar inexistencia de datos (XLS)](#comprobar-inexistencia-de-datos-xls)\r\n- [Comprobar existencia de datos (CSV)](#comprobar-existencia-de-datos-csv)\r\n- [Comprobar inexistencia de datos (CSV)](#comprobar-inexistencia-de-datos-csv)\r\n- [Comprobar existencia de datos (documento)](#comprobar-existencia-de-datos-documento)\r\n- [Comprobar inexistencia de datos (documento)](#comprobar-inexistencia-de-datos-documento)\r\n- [Comprobar número de filas](#comprobar-n%C3%BAmero-de-filas)\r\n- [Comprobar número de filas (documento)](#comprobar-n%C3%BAmero-de-filas-documento)\r\n- [Comprobar número de filas (tabla)](#comprobar-n%C3%BAmero-de-filas-documento)\r\n- [Comprobar tabla vacía](#comprobar-tabla-vac%C3%ADa)\r\n- [Comprobar tabla no vacía](#comprobar-tabla-no-vac%C3%ADa)\r\n\r\n\r\n\r\n\r\n## Configuración\r\n\r\n---\r\n### `database.connection.url`\r\nEstablece la URL de conexión a la base de datos con esquema JDBC. El driver usado para acceder a la base de datos se\r\ndeterminará a partir del formato de URL indicado.\r\n\r\nEjemplo:\r\n```yaml\r\ndatabase:\r\n  connection:\r\n    url: jdbc:h2:tcp://localhost:9092/~/test\r\n```\r\n\r\n---\r\n### `database.connection.username`\r\nEstablece el nombre de usuario requerido para conectar a la base de datos.\r\n\r\nEjemplo:\r\n```yaml\r\ndatabase:\r\n  connection:\r\n    username: test\r\n```\r\n\r\n---\r\n### `database.connection.password`\r\nEstablece la contraseña requerida para conectar a la base de datos.\r\n\r\nEjemplo:\r\n```yaml\r\ndatabase:\r\n  connection:\r\n    password: test\r\n```\r\n\r\n---\r\n### `database.metadata.schema`\r\nEstablece manualmente el esquema de base de datos que se usará para recuperar metadatos como claves privadas y/o\r\nnulabilidad. Si no se indica, se usará el esquema por defecto que retorne la conexión.\r\n\r\nEjemplo:\r\n```yaml\r\ndatabase:\r\n  metadata:\r\n    schema: TESTDB\r\n```\r\n\r\n---\r\n### `database.metadata.catalog`\r\nEstablece manualmente el catálogo de base de datos (si el motor soporta esta característica) que se usará para recuperar\r\nmetadatos como claves privadas y/o nulabilidad. Si no se indica, se usará el esquema por defecto que retorne la conexión.\r\n\r\nEjemplo:\r\n```yaml\r\ndatabase:\r\n  metadata:\r\n    catalog: TESTCAT\r\n```\r\n\r\n---\r\n### `database.metadata.caseSensititvy`\r\nEstablece si se debería hacer alguna transformación de mayúsculas/minúsculas cuando se intente acceder a los metadatos.\r\nAlgunos motores son estrictos con respecto a esto, y puede causar errores inesperados si no se configura correctamente.\r\nLos posibles valores son:\r\n- `INSENSITIVE`: Los identificadores se mantendrán como estén escritos.\r\n- `LOWER_CASED`: Los identificadores se convertirán a minúsculas.\r\n- `UPPER_CASED`: Los identificadores se convertirán a mayúsculas.\r\n\r\nEjemplo:\r\n```yaml\r\ndatabase:\r\n  metadata:\r\n    caseSensitivity: UPPER_CASED\r\n```\r\n\r\n---\r\n### `database.csv.format`\r\n\r\nEstablece la variante de formato usado a la hora de leer ficheros CSV. Los valores aceptados son directamente los usados\r\npor el projecto [Commons CSV][1] (consultar el enlace para una explicación exhaustiva de cada variante). Los posibles\r\nvalores son:\r\n- `DEFAULT`\r\n- `INFORMIX_UNLOAD`\r\n- `INFORMIX_UNLOAD_CSV`\r\n- `MYSQL`\r\n- `ORACLE`\r\n- `POSTGRESQL_CSV`\r\n- `POSTGRESQL_TEXT`\r\n- `RFC4180`\r\n\r\nEl valor por defecto es `DEFAULT`.\r\n\r\nEjemplo:\r\n```yaml\r\ndatabase:\r\n  csv:\r\n    format: ORACLE\r\n```\r\n\r\n---\r\n### `database.xls.ignoreSheetPattern`\r\nEstablece la expresión regular usada para determinar qué hojas se deberían ignorar cuando se cargan datos de un fichero\r\nXLSX.\r\n\r\nEl valor por defecto es `#.*`.\r\n\r\nEjemplo:\r\n```yaml\r\ndatabase:\r\n  xls:\r\n    ignoreSheetPattern: //.*\r\n```\r\n\r\n---\r\n### `database.nullSymbol`\r\nEstablece el literal usado para marcar una celda específica con el valor correspondiente al `NULL` de SQL. Se usa en\r\ncualquier orígen de datos (ficheros CSV, XLSX, y tablas embebidas en la definición del test).\r\n\r\nEl valor por defecto es `<null>`.\r\n\r\nEjemplo:\r\n```yaml\r\ndatabase:\r\n  nullSymbol: (null)\r\n```\r\n\r\n---\r\n### `database.enableCleanupUponCompletion`\r\nEl comportamiento por defecto del plugin no realiza ninguna operación de limpieza de la base de datos al acabar la\r\nejecución de los tests. Esto es así para poder comprobar resultados manualmente y depurar errores. Los posibles valores\r\nson:\r\n- `false`: no se realizará ninguna acción de limpieza.\r\n- `true`: se forzará a limpiar la base de datos borrando los datos de prueba introducidos durante la ejecución.\r\n\r\nEl valor por defecto es `false`.\r\n\r\nEjemplo:\r\n```yaml\r\ndatabase:\r\n  enableCleanupUponCompletion: \"true\"\r\n```\r\n\r\n\r\n\r\n## Pasos\r\n\r\n---\r\n### Definir conexión\r\n```\r\nla URL de conexión a BBDD {url} usando el usuario {username} y la contraseña {password}\r\n```\r\nEstablece la URL, nombre de usuario y contraseña para conectarse a la base de datos. Este paso es equivalente a\r\nconfigurar las propiedades [`database.connection.url`](#databaseconnectionurl),\r\n[`database.connection.username`](#databaseconnectionusername),\r\n[`database.connection.password`](#databaseconnectionpassword).\r\n\r\n#### Parámetros:\r\n| Nombre     | Kukumo type | Descripción           |\r\n|------------|-------------|-----------------------|\r\n| `url`      | `text`      | La URL de conexión    |\r\n| `username` | `text`      | Nombre de usuario     |\r\n| `password` | `text`      | Contraseña de usuario |\r\n\r\n#### Ejemplos:\r\n```gherkin\r\n  Dada la URL de conexión a BBDD 'jdbc:h2:tcp://localhost:9092/~/TESTDB' usando el usuario 'test' y la contraseña 'test'\r\n```\r\n\r\n---\r\n### Definir script post ejecución\r\n```\r\nAl finalizar, se ejecuta el siguiente script SQL:\r\n```\r\nEstablece las sentencias SQL que se ejecutarán una vez finalizado el escenario, independientemente del estado de la\r\nejecución.\r\n\r\n#### Parámetros:\r\n| Nombre | Kukumo type | Descripción          |\r\n|--------|-------------|----------------------|\r\n|        | `document`  | Contenido del script |\r\n\r\n#### Ejemplos:\r\n```gherkin\r\n  * Al finalizar, se ejecuta el siguiente script SQL:\r\n    \"\"\"\r\n    UPDATE AAAA SET STATE = 2 WHERE ID = 1;\r\n    DELETE FROM BBBB WHERE ID = 2;\r\n    \"\"\"\r\n```\r\n\r\n---\r\n### Definir script post ejecución (fichero)\r\n```\r\nAl finalizar, se ejecuta el script SQL del fichero {file}\r\n```\r\nEstablece las sentencias SQL del fichero indicado que se ejecutarán una vez finalizado el escenario, independientemente\r\ndel estado de la ejecución.\r\n\r\n#### Parámetros:\r\n| Nombre | Kukumo type | Descripción |\r\n|--------|-------------|-------------|\r\n| `file` | `file`      | Fichero SQL |\r\n\r\n#### Ejemplos:\r\n```gherkin\r\n  * Al finalizar, se ejecuta el script SQL del fichero 'data/insert-users.sql'\r\n```\r\n\r\n---\r\n### Ejecutar script\r\n```\r\nse ejecuta el siguiente script SQL:\r\n```\r\nEjecuta el script SQL escrito a continuación.\r\n\r\n#### Parámetros:\r\n| Nombre | Kukumo type | Descripción          |\r\n|--------|-------------|----------------------|\r\n|        | `document`  | Contenido del script |\r\n\r\n#### Ejemplos:\r\n```gherkin\r\n  Cuando se ejecuta el siguiente script SQL:\r\n    \"\"\"sql\r\n    UPDATE USER SET STATE = 2 WHERE BLOCKING_DATE IS NULL;\r\n    DELETE FROM USER WHERE STATE = 3;\r\n    \"\"\"\r\n```\r\n\r\n---\r\n### Ejecutar script (fichero)\r\n```\r\nse ejecuta el script SQL del fichero {file}\r\n```\r\nEjecuta el script SQL existente en el fichero indicado.\r\n\r\n#### Parámetros:\r\n| Nombre | Kukumo type | Descripción |\r\n|--------|-------------|-------------|\r\n| `file` | `file`      | Fichero SQL |\r\n\r\n#### Ejemplos:\r\n```gherkin\r\n  Cuando se ejecuta el script SQL del fichero 'data/insert-users.sql'\r\n```\r\n\r\n---\r\n### Vaciar tabla\r\n```\r\nse limpia la tabla de BBDD {word}\r\n```\r\nLimpia la tabla indicada, intentando primero con la sentencia `TRUNCATE` , y con la sentencia `DELETE FROM` en caso de\r\nfallar la primera.\r\n\r\n#### Parámetros:\r\n| Nombre | Kukumo type | Descripción        |\r\n|--------|-------------|--------------------|\r\n| `word` | `word`      | Nombre de la tabla |\r\n\r\n#### Ejemplos:\r\n```gherkin\r\n  Cuando se limpia la tabla de BBDD USERS\r\n```\r\n\r\n---\r\n### Eliminar datos\r\n```\r\nse (ha) elimina(n|do) * con {column} = {value} de la tabla de BBDD {table}\r\n```\r\nElimina de una tabla dada las filas que satisfagan la comparación indicada.\r\n\r\n#### Parámetros:\r\n| Nombre   | Kukumo type | Descripción          |\r\n|----------|-------------|----------------------|\r\n| `column` | `word`      | Nombre de la columna |\r\n| `value`  | `text`      | Valor de la columna  |\r\n| `table`  | `word`      | Nombre de la tabla   |\r\n\r\n#### Ejemplos:\r\n```gherkin\r\n  Cuando se eliminan los usuarios con STATE = '2' de la tabla de BBDD USER \r\n```\r\n```gherkin\r\n  Cuando se ha eliminado los usuarios con STATE = '2' de la tabla de BBDD USER \r\n```\r\n\r\n---\r\n### Eliminar datos (tabla)\r\n```\r\nse (ha) elimina(n|do) (lo|el|la|los|las) siguiente(s) * de la tabla de BBDD {word}:\r\n```\r\nElimina de una tabla dada las filas indicadas.\r\n\r\n#### Parámetros:\r\n| Nombre | Kukumo type | Descripción         |\r\n|--------|-------------|---------------------|\r\n| `word` | `word`      | Nombre de la tabla  |\r\n|        | `table`     | Tabla con los datos |\r\n\r\n#### Ejemplos:\r\n```gherkin\r\n  Cuando se elimina los siguientes usuarios de la tabla de BBDD USER:\r\n    | USER  | STATE | BLOCKING_DATE |   \r\n    | user1 | 2     | <null>        |\r\n    | user2 | 3     | 2020-02-13    |\r\n```\r\n```gherkin\r\n  Cuando se ha eliminado lo siguiente de la tabla de BBDD USER:\r\n    | USER  | STATE | BLOCKING_DATE |   \r\n    | user1 | 2     | <null>        |\r\n```\r\n\r\n---\r\n### Eliminar datos (XLS)\r\n```\r\nse (ha) elimina(do) el contenido del fichero XLS {file} de la BBDD\r\n```\r\nElimina las filas que concuerdan con los datos del fichero XLS indicado.\r\n\r\n#### Parámetros:\r\n| Nombre | Kukumo type | Descripción |\r\n|--------|-------------|-------------|\r\n| `file` | `file`      | Fichero XLS |\r\n\r\n#### Ejemplos:\r\n```gherkin\r\n  Cuando se elimina el contenido del fichero XLS 'data/users.xls' de la BBDD\r\n```\r\n```gherkin\r\n  Cuando se ha eliminado el contenido del fichero XLS 'data/users.xls' de la BBDD\r\n```\r\n\r\n---\r\n### Eliminar datos (CSV)\r\n```\r\nse (ha) elimina(do) el contenido del fichero CSV {csv} de la tabla de BBDD {table}\r\n```\r\nElimina las filas de una tabla dada que concuerdan con los datos del fichero CSV proporcionado.\r\n\r\n#### Parámetros:\r\n| Nombre  | Kukumo type | Descripción        |\r\n|---------|-------------|--------------------|\r\n| `csv`   | `file`      | Fichero CSV        |\r\n| `table` | `word`      | Nombre de la tabla |\r\n\r\n#### Ejemplos:\r\n```gherkin\r\n  Cuando se elimina el contenido del fichero CSV 'data/users.csv' de la tabla de BBDD USER\r\n```\r\n```gherkin\r\n  Cuando se ha eliminado el contenido del fichero CSV 'data/users.csv' de la tabla de BBDD USER\r\n```\r\n\r\n---\r\n### Insertar datos (tabla)\r\n```\r\nse (ha) inserta(do) (lo|el|la|los|las) siguiente(s) * en la tabla de BBDD {word}:\r\n```\r\nInserta las filas indicadas a continuación una tabla dada. Las columnas no-nulables para las que no se proporcionen\r\ndatos se rellenarán con datos aleatorios.\r\n\r\n#### Parámetros:\r\n| Nombre | Kukumo type | Descripción         |\r\n|--------|-------------|---------------------|\r\n| `word` | `word`      | Nombre de la tabla  |\r\n|        | `table`     | Tabla con los datos |\r\n\r\n#### Ejemplos:\r\n```gherkin\r\n  Cuando se inserta lo siguiente en la tabla de BBDD USER:\r\n    | USER  | STATE | BLOCKING_DATE |   \r\n    | user1 | 2     | <null>        |\r\n    | user2 | 3     | 2020-02-13    |\r\n```\r\n```gherkin\r\n  Cuando se ha insertado los siguientes usuarios en la tabla de BBDD USER:\r\n    | USER  | STATE | BLOCKING_DATE |   \r\n    | user1 | 2     | <null>        |\r\n    | user2 | 3     | 2020-02-13    |\r\n```\r\n\r\n---\r\n### Insertar datos (XLS)\r\n```\r\nse (ha) inserta(do) el contenido del fichero XLS {file} en la BBDD\r\n```\r\nInserta las filas contenidas en el fichero XLS indicado, una hoja por tabla. Las columnas no-nulables para las que no se\r\nproporcionen datos se rellenarán con datos aleatorios.\r\n\r\n#### Parámetros:\r\n| Nombre | Kukumo type | Descripción |\r\n|--------|-------------|-------------|\r\n| `file` | `file`      | Fichero XLS |\r\n\r\n#### Ejemplos:\r\n```gherkin\r\n  Cuando se inserta el contenido del fichero XLS 'data/users.xls' en la BBDD\r\n``` \r\n```gherkin\r\n  Cuando se ha insertado el contenido del fichero XLS 'data/users.xls' en la BBDD\r\n``` \r\n\r\n---\r\n### Insertar datos (CSV)\r\n```\r\nse (ha) inserta(do) el contenido del fichero CSV {csv:file} en la tabla de BBDD {table}\r\n```\r\nInserta en una tabla dada las files contenidas en el fichero CSV proporcionado. Las columnas no-nulables para las que no\r\nse proporcionen datos se rellenarán con datos aleatorios.\r\n\r\n#### Parámetros:\r\n| Nombre   | Kukumo type | Descripción         |\r\n|----------|-------------|---------------------|\r\n| `csv`    | `file`      | Fichero CSV         |\r\n| `table`  | `word`      | Nombre de la tabla  |\r\n\r\n#### Ejemplos:\r\n```gherkin\r\n  Cuando se inserta el contenido del fichero CSV 'data/users.csv' en la tabla de BBDD USER\r\n```\r\n```gherkin\r\n  Cuando se ha insertado el contenido del fichero CSV 'data/users.csv' en la tabla de BBDD USER\r\n```\r\n\r\n---\r\n### Comprobar existencia de datos\r\n```\r\n* con {column} = {value} existe(n) en la tabla de BBDD {table}\r\n```\r\nComprueba que existe al menos una fila en la tabla indicada para la cual se cumple una comparación dada.\r\n\r\n#### Parámetros:\r\n| Nombre   | Kukumo type | Descripción          |\r\n|----------|-------------|----------------------|\r\n| `column` | `word`      | Nombre de la columna |\r\n| `value`  | `text`      | Valor de la columna  |\r\n| `table`  | `word`      | Nombre de la tabla   |\r\n\r\n#### Ejemplos:\r\n```gherkin\r\n  Entonces varios usuarios con STATE = '1' existen en la tabla de BBDD USER\r\n```\r\n\r\n---\r\n### Comprobar inexistencia de datos\r\n```\r\n* con {column} = {value} no existe(n) en la tabla de BBDD {table}\r\n```\r\nComprueba que no existe ninguna fila en la tabla indicada para la cual se cumpla una comparación.\r\n\r\n#### Parámetros:\r\n| Nombre   | Kukumo type | Descripción          |\r\n|----------|-------------|----------------------|\r\n| `column` | `word`      | Nombre de la columna |\r\n| `value`  | `text`      | Valor de la columna  |\r\n| `table`  | `word`      | Nombre de la tabla   |\r\n\r\n#### Ejemplos:\r\n```gherkin\r\n  Entonces usuarios con STATE = '1' no existen en la tabla de BBDD USER\r\n```\r\n\r\n---\r\n### Comprobar existencia de datos (id)\r\n```\r\n* identificad(o|a|os|as) por {id} existe(n) en la tabla de BBDD {table}\r\n```\r\nComprueba que existe una fila en la tabla dada cuya clave primaria coincide con la indicada. La tabla debe tener una\r\nclave primaria formada por una sola columna.\r\n\r\n#### Parámetros:\r\n| Nombre  | Kukumo type | Descripción                |\r\n|---------|-------------|----------------------------|\r\n| `id`    | `text`      | Valor de la clave primaria |\r\n| `table` | `word`      | Nombre de la tabla         |\r\n\r\n#### Ejemplos:\r\n```gherkin\r\n  Entonces el usuario identificado por 'user1' existe en la tabla de BBDD USER\r\n```\r\n```gherkin\r\n  Entonces los usuarios identificados por 'algo' existen en la tabla de BBDD USER\r\n```\r\n\r\n---\r\n### Comprobar inexistencia de datos (id)\r\n```\r\n* identificad(o|a|os|as) por {id} no existe(n) en la tabla de BBDD {table}\r\n```\r\nComprueba que no existe una fila en la tabla dada cuya clave primaria coincide con la indicada. La tabla debe tener una\r\nclave primaria formada por una sola columna.\r\n\r\n#### Parámetros:\r\n| Nombre  | Kukumo type | Descripción                |\r\n|---------|-------------|----------------------------|\r\n| `id`    | `text`      | Valor de la clave primaria |\r\n| `table` | `word`      | Nombre de la tabla         |\r\n\r\n#### Ejemplos:\r\n```gherkin\r\n  Entonces el usuario identificado por 'user1' no existe en la tabla de BBDD USER\r\n```\r\n```gherkin\r\n  Entonces los usuarios identificados por 'algo' no existen en la tabla de BBDD USER\r\n```\r\n\r\n---\r\n### Comprobar existencia de datos (tabla)\r\n```\r\n(el|los) siguiente(s) registro(s) existe(n) en la tabla de BBDD {table}:\r\n```\r\nComprueba que todas las filas siguientes existen en una tabla dada.\r\n\r\n#### Parámetros:\r\n| Nombre  | Kukumo type | Descripción         |\r\n|---------|-------------|---------------------|\r\n| `table` | `word`      | Nombre de la tabla  |\r\n|         | `table`     | Tabla con los datos |\r\n\r\n#### Ejemplos:\r\n```gherkin\r\n  Entonces los siguientes registros existen en la tabla de BBDD USER:\r\n    | USER  | STATE | BLOCKING_DATE |   \r\n    | user1 | 2     | <null>        |\r\n    | user2 | 3     | 2020-02-13    |\r\n```\r\n\r\n---\r\n### Comprobar inexistencia de datos (tabla)\r\n```\r\n(el|los) siguiente(s) registro(s) no existe(n) en la tabla de BBDD {table}:\r\n```\r\nComprueba que ninguna de las filas siguientes existen en una tabla dada.\r\n\r\n#### Parámetros:\r\n| Nombre  | Kukumo type | Descripción         |\r\n|---------|-------------|---------------------|\r\n| `table` | `word`      | Nombre de la tabla  |\r\n|         | `table`     | Tabla con los datos |\r\n\r\n#### Ejemplos:\r\n```gherkin\r\n  Entonces los siguientes registros no existen en la tabla de BBDD USER:\r\n    | USER  | STATE | BLOCKING_DATE |   \r\n    | user1 | 2     | <null>        |\r\n    | user2 | 3     | 2020-02-13    |\r\n```\r\n\r\n---\r\n### Comprobar existencia de datos (XLS)\r\n```\r\nel contenido del fichero XLS {file} existe en la base de datos\r\n```\r\nComprueba que todas las filas del fichero XLS proporcionado existen en la base de datos, correspondiendo cada hoja a una\r\ntabla.\r\n\r\n#### Parámetros:\r\n| Nombre  | Kukumo type | Descripción |\r\n|---------|-------------|-------------|\r\n| `file`  | `file`      | Fichero XLS |\r\n\r\n#### Ejemplos:\r\n```gherkin\r\n  Entonces el contenido del fichero XLS 'data/example.xls' existe en la base de datos\r\n```\r\n\r\n---\r\n### Comprobar inexistencia de datos (XLS)\r\n```\r\nel contenido del fichero XLS {file} no existe en la base de datos\r\n```\r\nComprueba que ninguna de las filas del fichero XLS proporcionado existen en la base de datos, correspondiendo cada hoja\r\na una tabla.\r\n\r\n#### Parámetros:\r\n| Nombre  | Kukumo type | Descripción |\r\n|---------|-------------|-------------|\r\n| `file`  | `file`      | Fichero XLS |\r\n\r\n#### Ejemplos:\r\n```gherkin\r\n  Entonces el contenido del fichero XLS 'data/example.xls' no existe en la base de datos\r\n```\r\n\r\n---\r\n### Comprobar existencia de datos (CSV)\r\n```\r\nel contenido del fichero CSV {csv} existe en la tabla de BBDD {table}\r\n```\r\nComprueba que todas las filas del fichero CSV proporcionado existen en una tabla dada.\r\n\r\n#### Parámetros:\r\n| Nombre   | Kukumo type | Descripción         |\r\n|----------|-------------|---------------------|\r\n| `csv`    | `file`      | Fichero CSV         |\r\n| `table`  | `word`      | Nombre de la tabla  |\r\n\r\n#### Ejemplos:\r\n```gherkin\r\n  Entonces el contenido del fichero CSV 'data/users.csv' existe en la tabla de BBDD USER\r\n```\r\n\r\n---\r\n### Comprobar inexistencia de datos (CSV)\r\n```\r\nel contenido del fichero CSV {csv} no existe en la tabla de BBDD {table}\r\n```\r\nComprueba que todas las filas incluidas en el fichero CSV proporcionado existen en una tabla dada\r\n\r\n#### Parámetros:\r\n| Nombre   | Kukumo type | Descripción         |\r\n|----------|-------------|---------------------|\r\n| `csv`    | `file`      | Fichero CSV         |\r\n| `table`  | `word`      | Nombre de la tabla  |\r\n\r\n#### Ejemplos:\r\n```gherkin\r\n  Entonces el contenido del fichero CSV 'data/users.csv' no existe en la tabla de BBDD USER\r\n```\r\n\r\n---\r\n### Comprobar existencia de datos (documento)\r\n```\r\n* que satisface(n) la siguiente cláusula SQL existe(n) en la tabla de BBDD {table}:\r\n```\r\nComprueba que al menos una fila de la tabla dada satisface la claúsula SQL indicada.\r\n\r\n#### Parámetros:\r\n| Nombre  | Kukumo type | Descripción        |\r\n|---------|-------------|--------------------|\r\n| `table` | `word`      | Nombre de la tabla |\r\n|         | `document`  | Cláusula where     |\r\n\r\n#### Ejemplos:\r\n```gherkin\r\n  Entonces al menos un usuario que satisface la siguiente cláusula SQL existe en la tabla de BBDD USER:\r\n    \"\"\"\r\n    STATE IN (2,3) OR BLOCKING_DATE IS NULL\r\n    \"\"\"\r\n```\r\n\r\n---\r\n### Comprobar inexistencia de datos (documento)\r\n```\r\n* que satisface(n) la siguiente cláusula SQL no existe(n) en la tabla de BBDD {table}:\r\n```\r\nComprueba que ninguna fila de la tabla dada satisface la claúsula SQL indicada.\r\n\r\n#### Parámetros:\r\n| Nombre  | Kukumo type | Descripción        |\r\n|---------|-------------|--------------------|\r\n| `table` | `word`      | Nombre de la tabla |\r\n|         | `document`  | Cláusula where     |\r\n\r\n#### Ejemplos:\r\n```gherkin\r\n  Entonces usuarios que satisfacen la siguiente cláusula SQL no existen en la tabla de BBDD USER:\r\n    \"\"\"sql\r\n    STATE IN (2,3) OR BLOCKING_DATE IS NULL\r\n    \"\"\"\r\n```\r\n\r\n---\r\n### Comprobar número de datos\r\n```\r\nel número de * con {column} = {value} en la tabla de BBDD {table} {matcher}\r\n```\r\nComprueba que el número de filas que satisfacen la condición indicada en la tabla indicada cumple la comparación\r\nnumérica indicada.\r\n\r\n#### Parámetros:\r\n| Nombre    | Kukumo type      | Descripción          |\r\n|-----------|------------------|----------------------|\r\n| `column`  | `word`           | Nombre de la columna |\r\n| `value`   | `text`           | Valor de la columna  |\r\n| `table`   | `word`           | Nombre de la tabla   |\r\n| `matcher` | `long-assertion` | Comparador numérico  |\r\n\r\n#### Ejemplos:\r\n```gherkin\r\n  Entonces el número de usuarios con STATE = '1' en la tabla de BBDD USER es mayor que 5\r\n```\r\n\r\n---\r\n### Comprobar número de datos (tabla)\r\n```\r\nel número de * que satisfacen (lo|el|la|los|las) siguiente(s) * en la tabla de BBDD {table} {matcher}:\r\n```\r\nComprueba que el número de filas que satisfacen los valores indicados en la tabla indicada cumple la comparación\r\nnumérica indicada.\r\n\r\n#### Parámetros:\r\n| Nombre    | Kukumo type      | Descripción         |\r\n|-----------|------------------|---------------------|\r\n| `table`   | `word`           | Nombre de la tabla  |\r\n| `matcher` | `long-assertion` | Comparador numérico |\r\n|           | `table`          | Tabla con los datos |\r\n\r\n#### Ejemplos:\r\n```gherkin\r\n  Entonces el número de usuarios que satisfacen lo siguiente en la tabla de BBDD USER es 0\r\n    | USER  | STATE | BLOCKING_DATE |   \r\n    | user1 | 2     | <null>        |\r\n```\r\n\r\n---\r\n### Comprobar número de datos (documento)\r\n```\r\nel número de * que satisfacen la siguiente cláusula SQL en la tabla de BBDD {table} {matcher}:\r\n```\r\nComprueba que el número de filas que satisfacen la condición indicada en la tabla indicada cumple la comparación\r\nnumérica indicada.\r\n\r\n#### Parámetros:\r\n| Nombre    | Kukumo type      | Descripción         |\r\n|-----------|------------------|---------------------|\r\n| `table`   | `word`           | Nombre de la tabla  |\r\n| `matcher` | `long-assertion` | Comparador numérico |\r\n|           | `document`       | Cláusula where      |\r\n\r\n#### Ejemplos:\r\n```gherkin\r\n  Entonces el número de usuarios que satisfacen la siguiente cláusula SQL en la tabla de BBDD USER es menor que 3:\r\n    \"\"\"\r\n    STATE IN (2,3) OR BLOCKING_DATE IS NULL\r\n    \"\"\"\r\n```\r\n\r\n---\r\n### Comprobar tabla vacía\r\n```\r\nla tabla de BBDD {word} está vacía\r\n```\r\nComprueba que no existe ninguna fila en la tabla indicada.\r\n\r\n#### Parámetros:\r\n| Nombre | Kukumo type | Descripción        |\r\n|--------|-------------|--------------------|\r\n| `word` | `word`      | Nombre de la tabla |\r\n\r\n#### Ejemplos:\r\n```gherkin\r\n  Entonces la tabla de BBDD USER está vacía\r\n```\r\n\r\n---\r\n### Comprobar tabla no vacía\r\n```\r\nla tabla de BBDD {word} no está vacía\r\n```\r\nComprueba que existe al menos una fila en la tabla indicada.\r\n\r\n#### Parámetros:\r\n| Nombre | Kukumo type | Descripción        |\r\n|--------|-------------|--------------------|\r\n| `word` | `word`      | Nombre de la tabla |\r\n\r\n#### Ejemplos:\r\n```gherkin\r\n  Entonces la tabla de BBDD USER no está vacía\r\n```\r\n\r\n\r\n\r\n\r\n\r\n[1]:  https://commons.apache.org/proper/commons-csv/"}},"context":{}}