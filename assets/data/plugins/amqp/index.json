{"hash":"ed8ab4ac0effb0bac2bde60a1462a923227b185d","data":{"doc":{"title":"Pasos AMQP","path":"/plugins/amqp/","date":"20. September 2022","content":"\r\n\r\nEste plugin proporciona una serie de pasos para interactuar con una aplicación vía \r\n[Advanced Message Queuing Protocol](https://amqp.org). La implementación subyacente se basa en \r\n[RabbitMQ](https://rabbitmq.com), aunque podría cambiar en futuras versiones.\r\n\r\nActualmente, esta librería proporciona una funcionalidad muy limitada y existe como prueba de concepto.\r\n\r\n\r\n**Configuración**:\r\n- [`amqp.connection.url`](#amqpconnectionurl)\r\n- [`amqp.connection.username`](#amqpconnectionusername)\r\n- [`amqp.connection.password`](#amqpconnectionpassword)\r\n- [`amqp.queue.durable`](#amqpqueuedurable)\r\n- [`amqp.queue.exclusive`](#amqpqueueexclusive)\r\n- [`amqp.queue.autodelete`](#amqpqueueautodelete)\r\n\r\n**Pasos**:\r\n- [Definir conexión](#definir-conexi%C3%B3n)\r\n- [Definir cola destino](#definir-cola-destino)\r\n- [Enviar mensaje a cola](#enviar-mensaje-a-cola)\r\n- [Enviar mensaje a cola (fichero)](#enviar-mensaje-a-cola-fichero)\r\n- [Establecer pausa](#establecer-pausa)\r\n- [Validar mensaje](#validar-mensaje)\r\n- [Validar mensaje (fichero)](#validar-mensaje-fichero)\r\n\r\n\r\n## Configuración\r\n\r\n---\r\n###  `amqp.connection.url`\r\nEstablece la URL que utilizará el agente AMQP.\r\n\r\nEjemplo:\r\n\r\n```yaml\r\namqp:\r\n  connection:\r\n    url: amqp://127.0.0.1:5671\r\n```\r\n\r\n---\r\n###  `amqp.connection.username`\r\nEstablece el nombre de usuario que utilizará el agente AMQP.\r\n\r\nEjemplo:\r\n\r\n```yaml\r\namqp:\r\n  connection:\r\n    username: guest\r\n```\r\n\r\n---\r\n###  `amqp.connection.password`\r\nEstablece la contraseña de usuario que utilizará el agente AMQP.\r\n\r\nEjemplo:\r\n\r\n```yaml\r\namqp:\r\n  connection:\r\n    password: guest\r\n```\r\n\r\n---\r\n###  `amqp.queue.durable`\r\nEstablece si la cola será duradera o no (la cola sobrevivirá a un reinicio del servidor).\r\n\r\nEl valor por defecto es `false`.\r\n\r\nEjemplo:\r\n\r\n```yaml\r\namqp:\r\n  queue:\r\n    durable: \"true\"\r\n```\r\n\r\n---\r\n###  `amqp.queue.exclusive`\r\nEstablece si la cola será exclusiva (restringida a la conexión actual).\r\n\r\nEl valor por defecto es `false`.\r\n\r\nEjemplo:\r\n\r\n```yaml\r\namqp:\r\n  queue:\r\n    exclusive: \"true\"\r\n```\r\n\r\n---\r\n###  `amqp.queue.autodelete`\r\nEstablece si la cola de eliminación automática (el servidor la eliminará cuando ya no esté en uso).\r\n\r\nEl valor por defecto es `false`.\r\n\r\nEjemplo:\r\n\r\n```yaml\r\namqp:\r\n  queue:\r\n    autodelete: \"true\"\r\n```\r\n\r\n\r\n## Pasos\r\n\r\n---\r\n### Definir conexión\r\n\r\n```\r\nla conexión AMQP con URL {url:text} usando el usuario {username:text} y la contraseña {password:text}\r\n```\r\nEstablece la URL y las credenciales que utilizará el agente AMQP. Esta es la forma descriptiva de establecer las \r\npropiedades [`amqp.connection.url`](#amqpconnectionurl), [`amqp.connection.username`](#amqpconnectionusername), \r\n[`amqp.connection.password`](#amqpconnectionpassword).\r\n\r\n\r\n#### Parámetros:\r\n| Nombre     | Kukumo type | Descripción           |\r\n|------------|-------------|-----------------------|\r\n| `url`      | `text`      | La URL del agente     |\r\n| `username` | `text`      | Nombre de usuario     |\r\n| `password` | `text`      | Contraseña de usuario |\r\n\r\n#### Ejemplos:\r\n```gherkin\r\n  Dada la conexión AMQP con URL 'amqp://127.0.0.1:5671' usando el usuario 'guest' y la contraseña 'guest'\r\n```\r\n\r\n\r\n---\r\n### Definir cola destino\r\n\r\n```\r\nla cola de destino {word}\r\n```\r\nEstablece el nombre de la cola que se observará.\r\n\r\n#### Parámetros:\r\n| Nombre | Kukumo type | Descripción       |\r\n|--------|-------------|-------------------|\r\n| `word` | `word`      | Nombre de la cola |\r\n\r\n#### Ejemplos:\r\n```gherkin\r\n  Dada la cola de destino TEST\r\n```\r\n\r\n\r\n---\r\n### Enviar mensaje a cola\r\n\r\n```\r\nse envía a la cola {word} el siguiente mensaje JSON:\r\n```\r\nEnvía un mensaje JSON a la cola indicada.\r\n\r\n#### Parámetros:\r\n| Nombre | Kukumo type  | Descripción       |\r\n|--------|--------------|-------------------|\r\n| `word` | `word`       | Nombre de la cola |\r\n|        | `document`   | Mensaje JSON      |\r\n\r\n#### Ejemplos:\r\n```gherkin\r\n  Cuando se envía a la cola TEST el siguiente mensaje JSON:\r\n    ```json\r\n    {\r\n        \"data\": {\r\n            \"message\": \"Test message sent\"\r\n        }\r\n    }\r\n    ```\r\n```\r\n\r\n\r\n---\r\n### Enviar mensaje a cola (fichero)\r\n```\r\nse envía a la cola {queue:word} el mensaje del fichero JSON {file:file}\r\n```\r\nEnvía el contenido de un fichero JSON a la cola indicada.\r\n\r\n#### Parámetros:\r\n| Nombre  | Kukumo type | Descripción       |\r\n|---------|-------------|-------------------|\r\n| `file`  | `file`      | Fichero JSON      |\r\n| `queue` | `word`      | Nombre de la cola |\r\n\r\n#### Ejemplos:\r\n```gherkin\r\n  Cuando se envía a la cola TEST el mensaje del fichero JSON 'data/message.json'\r\n```\r\n\r\n\r\n---\r\n### Establecer pausa\r\n\r\n```\r\nse espera durante {integer} segundo(s)\r\n```\r\nSe produce una espera de un número fijo de segundos (generalmente para asegurarse de que se haya procesado el mensaje).\r\n\r\n#### Parámetros:\r\n| Nombre    | Kukumo type | Descripción                      |\r\n|-----------|-------------|----------------------------------|\r\n| `integer` | `integer`   | Cantidad de tiempo (en segundos) |\r\n\r\n#### Ejemplos:\r\n```gherkin\r\n  * se espera durante 2 segundos\r\n```\r\n\r\n\r\n---\r\n### Validar mensaje\r\n\r\n```\r\nel siguiente mensaje JSON se recibe en {integer} segundos:\r\n```\r\nValida que se reciba un mensaje JSON específico en la [cola observada](#definir-cola-destino), produciéndose un fallo \r\ndespués del tiempo de espera indicado.\r\n\r\n#### Parámetros:\r\n| Nombre    | Kukumo type | Descripción                      |\r\n|-----------|-------------|----------------------------------|\r\n| `integer` | `integer`   | Cantidad de tiempo (en segundos) |\r\n|           | `document`  | Mensaje JSON                     |\r\n\r\n#### Ejemplos:\r\n```gherkin\r\n  Cuando el siguiente mensaje JSON se recibe en 5 segundos:\r\n    ```json\r\n      {\r\n        \"data\": {\r\n          \"message\": \"Test message sent\"\r\n        }\r\n      }\r\n```\r\n\r\n\r\n---\r\n### Validar mensaje (fichero)\r\n\r\n```\r\nel mensaje del fichero JSON {file:file} se recibe en {seconds:integer} segundos\r\n```\r\nValida que se reciba el contenido de un fichero JSON específico en la [cola observada](#definir-cola-destino), \r\nproduciéndose un fallo después del tiempo de espera indicado.\r\n\r\n#### Parámetros:\r\n| Nombre | Kukumo type  | Descripción                      |\r\n|--------|--------------|----------------------------------|\r\n| `file` | `file`       | Fichero JSON                     |\r\n|        | `integer`    | Cantidad de tiempo (en segundos) |\r\n\r\n#### Ejemplos:\r\n```gherkin\r\n  Cuando el mensaje del fichero JSON 'data/message.json' se recibe en 5 segundos\r\n```\r\n\r\n\r\n"}},"context":{}}