{"hash":"d8e280ca9542f7d79d449a1dc6acd4719cef80eb","data":{"doc":{"title":"Pasos AMQP","path":"/plugins/amqp/","date":"20. September 2022","content":"<p>Este plugin proporciona una serie de pasos para interactuar con una aplicación vía\n<a href=\"https://amqp.org\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Advanced Message Queuing Protocol</a>. La implementación subyacente se basa en\n<a href=\"https://rabbitmq.com\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">RabbitMQ</a>, aunque podría cambiar en futuras versiones.</p>\n<blockquote>\n<p><strong>AVISO</strong></p>\n<p>Actualmente, esta librería proporciona una funcionalidad muy limitada y existe como prueba de concepto.</p>\n</blockquote>\n<div id=\"coord\" class=\"remark-code-tabs\"><label for=\"coord#0\" class=\"remark-code-tab\">\n                        <input type=\"radio\" id=coord#0 name=\"coord\" checked/> yaml\n                    </label><div class=\"remark-code-content\"><pre class=\"language-text\">es.iti.wakamiti:amqp-wakamiti-plugin:2.3.3</pre></div><label for=\"coord#2\" class=\"remark-code-tab\">\n                        <input type=\"radio\" id=coord#2 name=\"coord\" /> maven\n                    </label><div class=\"remark-code-content\"><pre class=\"language-text\">&lt;dependency>\n  &lt;groupId>es.iti.wakamiti&lt;/groupId>\n  &lt;artifactId>amqp-wakamiti-plugin&lt;/artifactId>\n  &lt;version>2.3.3&lt;/version>\n&lt;/dependency></pre></div></div>\n<hr class=\"remark-code-tabs-x\" rel=\"coord#maven\" />\n<hr>\n<ul id=\"toc\">\n<li>\n<p><a href=\"#configuraci%C3%B3n\">Configuración</a></p>\n<ul>\n<li><a href=\"#amqpconnectionurl\"><code class=\"language-text\">amqp.connection.url</code></a></li>\n<li><a href=\"#amqpconnectionusername\"><code class=\"language-text\">amqp.connection.username</code></a></li>\n<li><a href=\"#amqpconnectionpassword\"><code class=\"language-text\">amqp.connection.password</code></a></li>\n<li><a href=\"#amqpqueuedurable\"><code class=\"language-text\">amqp.queue.durable</code></a></li>\n<li><a href=\"#amqpqueueexclusive\"><code class=\"language-text\">amqp.queue.exclusive</code></a></li>\n<li><a href=\"#amqpqueueautodelete\"><code class=\"language-text\">amqp.queue.autodelete</code></a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#pasos\">Pasos</a></p>\n<ul>\n<li><a href=\"#definir-conexi%C3%B3n\">Definir conexión</a></li>\n<li><a href=\"#definir-cola-destino\">Definir cola destino</a></li>\n<li><a href=\"#enviar-mensaje-a-cola\">Enviar mensaje a cola</a></li>\n<li><a href=\"#enviar-mensaje-a-cola-fichero\">Enviar mensaje a cola (fichero)</a></li>\n<li><a href=\"#establecer-pausa\">Establecer pausa</a></li>\n<li><a href=\"#validar-mensaje\">Validar mensaje</a></li>\n<li><a href=\"#validar-mensaje-fichero\">Validar mensaje (fichero)</a></li>\n</ul>\n</li>\n</ul>\n<hr>\n<h2 id=\"configuración\"><a href=\"#configuraci%C3%B3n\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Configuración</h2>\n<h3 id=\"amqpconnectionurl\"><a href=\"#amqpconnectionurl\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a><code class=\"language-text\">amqp.connection.url</code></h3>\n<p>Establece la URL que utilizará el agente AMQP.</p>\n<p>Ejemplo:</p>\n<pre class=\"language-yaml\"><span class=\"token key atrule\">amqp</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">connection</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">url</span><span class=\"token punctuation\">:</span> amqp<span class=\"token punctuation\">:</span>//127.0.0.1<span class=\"token punctuation\">:</span><span class=\"token number\">5671</span></pre>\n<p><br /><br /></p>\n<h3 id=\"amqpconnectionusername\"><a href=\"#amqpconnectionusername\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a><code class=\"language-text\">amqp.connection.username</code></h3>\n<p>Establece el nombre de usuario que utilizará el agente AMQP.</p>\n<p>Ejemplo:</p>\n<pre class=\"language-yaml\"><span class=\"token key atrule\">amqp</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">connection</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">username</span><span class=\"token punctuation\">:</span> guest</pre>\n<p><br /><br /></p>\n<h3 id=\"amqpconnectionpassword\"><a href=\"#amqpconnectionpassword\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a><code class=\"language-text\">amqp.connection.password</code></h3>\n<p>Establece la contraseña de usuario que utilizará el agente AMQP.</p>\n<p>Ejemplo:</p>\n<pre class=\"language-yaml\"><span class=\"token key atrule\">amqp</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">connection</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">password</span><span class=\"token punctuation\">:</span> guest</pre>\n<p><br /><br /></p>\n<h3 id=\"amqpqueuedurable\"><a href=\"#amqpqueuedurable\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a><code class=\"language-text\">amqp.queue.durable</code></h3>\n<p>Establece si la cola será duradera o no (la cola sobrevivirá a un reinicio del servidor).</p>\n<p>El valor por defecto es <code class=\"language-text\">false</code>.</p>\n<p>Ejemplo:</p>\n<pre class=\"language-yaml\"><span class=\"token key atrule\">amqp</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">queue</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">durable</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"true\"</span></pre>\n<p><br /><br /></p>\n<h3 id=\"amqpqueueexclusive\"><a href=\"#amqpqueueexclusive\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a><code class=\"language-text\">amqp.queue.exclusive</code></h3>\n<p>Establece si la cola será exclusiva (restringida a la conexión actual).</p>\n<p>El valor por defecto es <code class=\"language-text\">false</code>.</p>\n<p>Ejemplo:</p>\n<pre class=\"language-yaml\"><span class=\"token key atrule\">amqp</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">queue</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">exclusive</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"true\"</span></pre>\n<p><br /><br /></p>\n<h3 id=\"amqpqueueautodelete\"><a href=\"#amqpqueueautodelete\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a><code class=\"language-text\">amqp.queue.autodelete</code></h3>\n<p>Establece si la cola de eliminación automática (el servidor la eliminará cuando ya no esté en uso).</p>\n<p>El valor por defecto es <code class=\"language-text\">false</code>.</p>\n<p>Ejemplo:</p>\n<pre class=\"language-yaml\"><span class=\"token key atrule\">amqp</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">queue</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">autodelete</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"true\"</span></pre>\n<hr>\n<h2 id=\"pasos\"><a href=\"#pasos\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Pasos</h2>\n<h3 id=\"definir-conexión\"><a href=\"#definir-conexi%C3%B3n\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Definir conexión</h3>\n<pre class=\"language-text\">la conexión AMQP con URL {url} usando el usuario {username} y la contraseña {password}</pre>\n<p>Establece la URL y las credenciales que utilizará el agente AMQP. Esta es la forma descriptiva de establecer las\npropiedades <a href=\"#amqpconnectionurl\"><code class=\"language-text\">amqp.connection.url</code></a>, <a href=\"#amqpconnectionusername\"><code class=\"language-text\">amqp.connection.username</code></a>,\n<a href=\"#amqpconnectionpassword\"><code class=\"language-text\">amqp.connection.password</code></a>.</p>\n<h4 id=\"parámetros\"><a href=\"#par%C3%A1metros\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Parámetros:</h4>\n<table>\n<thead>\n<tr>\n<th>Nombre</th>\n<th>Wakamiti type</th>\n<th>Descripción</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code class=\"language-text\">url</code></td>\n<td><code class=\"language-text\">text</code></td>\n<td>La URL del agente</td>\n</tr>\n<tr>\n<td><code class=\"language-text\">username</code></td>\n<td><code class=\"language-text\">text</code></td>\n<td>Nombre de usuario</td>\n</tr>\n<tr>\n<td><code class=\"language-text\">password</code></td>\n<td><code class=\"language-text\">text</code></td>\n<td>Contraseña de usuario</td>\n</tr>\n</tbody>\n</table>\n<h4 id=\"ejemplos\"><a href=\"#ejemplos\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Ejemplos:</h4>\n<pre class=\"language-gherkin\">  <span class=\"token atrule\">Dada</span> la conexión AMQP con URL <span class=\"token string\">'amqp://127.0.0.1:5671'</span> usando el usuario <span class=\"token string\">'guest'</span> y la contraseña <span class=\"token string\">'guest'</span></pre>\n<p><br /><br /></p>\n<h3 id=\"definir-cola-destino\"><a href=\"#definir-cola-destino\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Definir cola destino</h3>\n<pre class=\"language-text\">la cola de destino {word}</pre>\n<p>Establece el nombre de la cola que se observará.</p>\n<h4 id=\"parámetros-1\"><a href=\"#par%C3%A1metros-1\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Parámetros:</h4>\n<table>\n<thead>\n<tr>\n<th>Nombre</th>\n<th>Wakamiti type</th>\n<th>Descripción</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code class=\"language-text\">word</code></td>\n<td><code class=\"language-text\">word</code></td>\n<td>Nombre de la cola</td>\n</tr>\n</tbody>\n</table>\n<h4 id=\"ejemplos-1\"><a href=\"#ejemplos-1\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Ejemplos:</h4>\n<pre class=\"language-gherkin\">  <span class=\"token atrule\">Dada</span> la cola de destino TEST</pre>\n<p><br /><br /></p>\n<h3 id=\"enviar-mensaje-a-cola\"><a href=\"#enviar-mensaje-a-cola\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Enviar mensaje a cola</h3>\n<pre class=\"language-text\">se envía a la cola {word} el siguiente mensaje JSON:</pre>\n<p>Envía un mensaje JSON a la cola indicada.</p>\n<h4 id=\"parámetros-2\"><a href=\"#par%C3%A1metros-2\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Parámetros:</h4>\n<table>\n<thead>\n<tr>\n<th>Nombre</th>\n<th>Wakamiti type</th>\n<th>Descripción</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code class=\"language-text\">word</code></td>\n<td><code class=\"language-text\">word</code></td>\n<td>Nombre de la cola</td>\n</tr>\n<tr>\n<td></td>\n<td><code class=\"language-text\">document</code></td>\n<td>Mensaje JSON</td>\n</tr>\n</tbody>\n</table>\n<h4 id=\"ejemplos-2\"><a href=\"#ejemplos-2\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Ejemplos:</h4>\n<pre class=\"language-gherkin\">  <span class=\"token atrule\">Cuando</span> se envía a la cola TEST el siguiente mensaje JSON:\n    ```json\n    {\n        <span class=\"token string\">\"data\"</span>: {\n            <span class=\"token string\">\"message\"</span>: <span class=\"token string\">\"Test message sent\"</span>\n        }\n    }\n    ```</pre>\n<p><br /><br /></p>\n<h3 id=\"enviar-mensaje-a-cola-fichero\"><a href=\"#enviar-mensaje-a-cola-fichero\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Enviar mensaje a cola (fichero)</h3>\n<pre class=\"language-text\">se envía a la cola {queue} el mensaje del fichero JSON {file}</pre>\n<p>Envía el contenido de un fichero JSON a la cola indicada.</p>\n<h4 id=\"parámetros-3\"><a href=\"#par%C3%A1metros-3\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Parámetros:</h4>\n<table>\n<thead>\n<tr>\n<th>Nombre</th>\n<th>Wakamiti type</th>\n<th>Descripción</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code class=\"language-text\">file</code></td>\n<td><code class=\"language-text\">file</code></td>\n<td>Fichero JSON</td>\n</tr>\n<tr>\n<td><code class=\"language-text\">queue</code></td>\n<td><code class=\"language-text\">word</code></td>\n<td>Nombre de la cola</td>\n</tr>\n</tbody>\n</table>\n<h4 id=\"ejemplos-3\"><a href=\"#ejemplos-3\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Ejemplos:</h4>\n<pre class=\"language-gherkin\">  <span class=\"token atrule\">Cuando</span> se envía a la cola TEST el mensaje del fichero JSON <span class=\"token string\">'data/message.json'</span></pre>\n<p><br /><br /></p>\n<h3 id=\"establecer-pausa\"><a href=\"#establecer-pausa\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Establecer pausa</h3>\n<pre class=\"language-text\">se espera durante {integer} segundo(s)</pre>\n<p>Se produce una espera de un número fijo de segundos (generalmente para asegurarse de que se haya procesado el mensaje).</p>\n<h4 id=\"parámetros-4\"><a href=\"#par%C3%A1metros-4\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Parámetros:</h4>\n<table>\n<thead>\n<tr>\n<th>Nombre</th>\n<th>Wakamiti type</th>\n<th>Descripción</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code class=\"language-text\">integer</code></td>\n<td><code class=\"language-text\">integer</code></td>\n<td>Cantidad de tiempo (en segundos)</td>\n</tr>\n</tbody>\n</table>\n<h4 id=\"ejemplos-4\"><a href=\"#ejemplos-4\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Ejemplos:</h4>\n<pre class=\"language-gherkin\">  * se espera durante 2 segundos</pre>\n<p><br /><br /></p>\n<h3 id=\"validar-mensaje\"><a href=\"#validar-mensaje\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Validar mensaje</h3>\n<pre class=\"language-text\">el siguiente mensaje JSON se recibe en {integer} segundos:</pre>\n<p>Valida que se reciba un mensaje JSON específico en la <a href=\"#definir-cola-destino\">cola observada</a>, produciéndose un fallo\ndespués del tiempo de espera indicado.</p>\n<h4 id=\"parámetros-5\"><a href=\"#par%C3%A1metros-5\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Parámetros:</h4>\n<table>\n<thead>\n<tr>\n<th>Nombre</th>\n<th>Wakamiti type</th>\n<th>Descripción</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code class=\"language-text\">integer</code></td>\n<td><code class=\"language-text\">integer</code></td>\n<td>Cantidad de tiempo (en segundos)</td>\n</tr>\n<tr>\n<td></td>\n<td><code class=\"language-text\">document</code></td>\n<td>Mensaje JSON</td>\n</tr>\n</tbody>\n</table>\n<h4 id=\"ejemplos-5\"><a href=\"#ejemplos-5\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Ejemplos:</h4>\n<pre class=\"language-gherkin\">  <span class=\"token atrule\">Cuando</span> el siguiente mensaje JSON se recibe en 5 segundos:\n    ```json\n      {\n        <span class=\"token string\">\"data\"</span>: {\n          <span class=\"token string\">\"message\"</span>: <span class=\"token string\">\"Test message sent\"</span>\n        }\n      }</pre>\n<p><br /><br /></p>\n<h3 id=\"validar-mensaje-fichero\"><a href=\"#validar-mensaje-fichero\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Validar mensaje (fichero)</h3>\n<pre class=\"language-text\">el mensaje del fichero JSON {file} se recibe en {seconds} segundos</pre>\n<p>Valida que se reciba el contenido de un fichero JSON específico en la <a href=\"#definir-cola-destino\">cola observada</a>,\nproduciéndose un fallo después del tiempo de espera indicado.</p>\n<h4 id=\"parámetros-6\"><a href=\"#par%C3%A1metros-6\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Parámetros:</h4>\n<table>\n<thead>\n<tr>\n<th>Nombre</th>\n<th>Wakamiti type</th>\n<th>Descripción</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code class=\"language-text\">file</code></td>\n<td><code class=\"language-text\">file</code></td>\n<td>Fichero JSON</td>\n</tr>\n<tr>\n<td></td>\n<td><code class=\"language-text\">integer</code></td>\n<td>Cantidad de tiempo (en segundos)</td>\n</tr>\n</tbody>\n</table>\n<h4 id=\"ejemplos-6\"><a href=\"#ejemplos-6\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Ejemplos:</h4>\n<pre class=\"language-gherkin\">  <span class=\"token atrule\">Cuando</span> el mensaje del fichero JSON <span class=\"token string\">'data/message.json'</span> se recibe en 5 segundos</pre>\n"}},"context":{"id":"e2c17da5b8bc4cdcf4e3707f0c6f1844","path":"/plugins/amqp/","locale":"es"}}