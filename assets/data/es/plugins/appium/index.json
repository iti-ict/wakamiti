{"hash":"96f62a20562d83282173efa55646b0d88ee6865e","data":{"doc":{"title":"Appium","path":"/es/plugins/appium/","date":"9. June 2023","content":"<p>Este plugin permite usar Wakamiti para escribir escenarios que interactuen con un servidor\n<a href=\"http://appium.io/docs/en/2.0/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Appium</a>. Appium es un proyecto open-source diseñado para\nfacilitar la automatización de tests UI en varias plataformas, incluyendo aplicaciones móviles.</p>\n<p>El uso de este plugin requiere un servidor Appium en marcha, al igual que un dispositivo\nvirtual emulado. Más abajo hay un ejemplo de como preparar un entorno de test adecuado.</p>\n<blockquote>\n<p><strong>AVISO</strong></p>\n<p>En su estado actual, este plugin es principalmente una prueba de concepto más que un plugin\nplenamente funcional. Los pasos y la configuración indicada pueden variar en futuras versiones.</p>\n</blockquote>\n<h2 id=\"configuracion\"><a href=\"#configuracion\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Configuracion</h2>\n<blockquote>\n<p>Se puede especificar cualquier capacidad a pasar al Web Driver usando la clave adecuada con\nel formato <code class=\"language-text\">appium.capabilities.xxxxxx</code>. En este document se describen las opciones mas relevantes,\npero para una lista exhaustiva de las propiedades disponibles, consultar el\n<a href=\"https://w3c.github.io/webdriver/#capabilities\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">borrador W3C WebDriver</a>.</p>\n</blockquote>\n<hr>\n<h3 id=\"appiumurl\"><a href=\"#appiumurl\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a><code class=\"language-text\">appium.url</code></h3>\n<p>La URL del servidor Appium</p>\n<p>Ejemplo:</p>\n<pre class=\"language-yaml\"><span class=\"token key atrule\">appium</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">url</span><span class=\"token punctuation\">:</span> http<span class=\"token punctuation\">:</span>//127.0.0.1<span class=\"token punctuation\">:</span>4723/wd/hub</pre>\n<hr>\n<h3 id=\"appiumcapabilitiesapp\"><a href=\"#appiumcapabilitiesapp\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a><code class=\"language-text\">appium.capabilities.app</code></h3>\n<p>La ruta completa de la aplicación a testear</p>\n<p>Ejemplo:</p>\n<pre class=\"language-yaml\"><span class=\"token key atrule\">appium</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">capabilities</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">app</span><span class=\"token punctuation\">:</span> ApiDemos<span class=\"token punctuation\">-</span>debug.apk</pre>\n<hr>\n<h3 id=\"appiumcapabilitiesplatformname\"><a href=\"#appiumcapabilitiesplatformname\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a><code class=\"language-text\">appium.capabilities.platformName</code></h3>\n<p>El tipo de plataforma móvil que se va a testear</p>\n<p>Ejemplo:</p>\n<pre class=\"language-yaml\"><span class=\"token key atrule\">appium</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">capabilities</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">platformName</span><span class=\"token punctuation\">:</span> Android</pre>\n<hr>\n<h3 id=\"appiumcapabilitiesplatformversion\"><a href=\"#appiumcapabilitiesplatformversion\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a><code class=\"language-text\">appium.capabilities.platformVersion</code></h3>\n<p>La versión de la plataforma que se va a testear</p>\n<p>Ejemplo:</p>\n<pre class=\"language-yaml\"><span class=\"token key atrule\">appium</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">capabilities</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">platformVersion</span><span class=\"token punctuation\">:</span> <span class=\"token number\">11</span></pre>\n<hr>\n<h3 id=\"appiumcapabilitiesapppackage\"><a href=\"#appiumcapabilitiesapppackage\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a><code class=\"language-text\">appium.capabilities.appPackage</code></h3>\n<p>El nombre del paquete que contiene la aplicación que se va a testear</p>\n<p>Ejemplo:</p>\n<pre class=\"language-yaml\"><span class=\"token key atrule\">appium</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">capabilities</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">appPackage</span><span class=\"token punctuation\">:</span> io.appium.android.apis</pre>\n<hr>\n<h3 id=\"appiumcapabilitiesappactivity\"><a href=\"#appiumcapabilitiesappactivity\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a><code class=\"language-text\">appium.capabilities.appActivity</code></h3>\n<p>El nombre de la actividad a testear</p>\n<p>Ejemplo:</p>\n<pre class=\"language-yaml\"><span class=\"token key atrule\">appium</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">capabilities</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">appActivity</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'.view.TextFields'</span></pre>\n<h2 id=\"pasos\"><a href=\"#pasos\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Pasos</h2>\n<hr>\n<h3 id=\"seleccionar-un-elemento-de-interfaz-a-partir-de-su-id\"><a href=\"#seleccionar-un-elemento-de-interfaz-a-partir-de-su-id\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Seleccionar un elemento de interfaz a partir de su ID</h3>\n<pre class=\"language-text\">el elemento de interfaz con el ID {text}</pre>\n<p>Selecciona un elmento que será el sujeto de los siguientes pasos.</p>\n<h4 id=\"ejemplos\"><a href=\"#ejemplos\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Ejemplos:</h4>\n<pre class=\"language-gherkin\">  <span class=\"token atrule\">Dado</span> el elemento de interfaz con el ID <span class=\"token string\">'3423423'</span></pre>\n<hr>\n<h3 id=\"seleccionar-un-elemento-de-interfaz-a-partir-de-su-tipo\"><a href=\"#seleccionar-un-elemento-de-interfaz-a-partir-de-su-tipo\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Seleccionar un elemento de interfaz a partir de su tipo</h3>\n<pre class=\"language-text\">el elemento de interfaz de tipo {text}</pre>\n<p>Selecciona un elmento que será el sujeto de los siguientes pasos.</p>\n<h4 id=\"ejemplos-1\"><a href=\"#ejemplos-1\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Ejemplos:</h4>\n<pre class=\"language-gherkin\">  <span class=\"token atrule\">Dado</span> el elemento de interfaz de tipo <span class=\"token string\">'android.widget.EditText'</span></pre>\n<hr>\n<h3 id=\"seleccionar-un-elemento-de-interfaz-a-partir-de-su-ruta\"><a href=\"#seleccionar-un-elemento-de-interfaz-a-partir-de-su-ruta\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Seleccionar un elemento de interfaz a partir de su ruta</h3>\n<pre class=\"language-text\">el elemento de interfaz con ruta {text}</pre>\n<p>Selecciona un elmento que será el sujeto de los siguientes pasos.</p>\n<h4 id=\"ejemplos-2\"><a href=\"#ejemplos-2\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Ejemplos:</h4>\n<pre class=\"language-gherkin\">  <span class=\"token atrule\">Dado</span> el elemento de interfaz con ruta  <span class=\"token string\">'main.form.name'</span></pre>\n<hr>\n<h3 id=\"teclear-un-texto-en-un-elemento\"><a href=\"#teclear-un-texto-en-un-elemento\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Teclear un texto en un elemento</h3>\n<pre class=\"language-text\">se escribe el texto {text} en ese elemento</pre>\n<p>Emula la acción de introducir un texto cuando un elemento se ha seleccionado</p>\n<h4 id=\"ejemplos-3\"><a href=\"#ejemplos-3\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Ejemplos:</h4>\n<pre class=\"language-gherkin\">  <span class=\"token atrule\">Cuando</span> se escribe el texto <span class=\"token string\">'John'</span> en ese elemento</pre>\n<hr>\n<h3 id=\"se-pulsa-sobre-un-elemento\"><a href=\"#se-pulsa-sobre-un-elemento\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Se pulsa sobre un elemento</h3>\n<pre class=\"language-text\">se pulsa sobre ese elemento</pre>\n<p>Emula la acción de pulsar sobre un elemento</p>\n<h4 id=\"ejemplos-4\"><a href=\"#ejemplos-4\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Ejemplos:</h4>\n<pre class=\"language-gherkin\">  <span class=\"token atrule\">Cuando</span> se pulsa sobre ese elemento</pre>\n<hr>\n<h3 id=\"se-pulsa-dos-veces-sobre-un-elemento\"><a href=\"#se-pulsa-dos-veces-sobre-un-elemento\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Se pulsa dos veces sobre un elemento</h3>\n<pre class=\"language-text\">se pulsa dos veces ese elmento</pre>\n<p>Emula la acción de pulsar dos veces sobre un elemento</p>\n<h4 id=\"ejemplos-5\"><a href=\"#ejemplos-5\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Ejemplos:</h4>\n<pre class=\"language-gherkin\">  <span class=\"token atrule\">Cuando</span> se pulsa dos veces sobre ese elemento</pre>\n<hr>\n<h3 id=\"valida-el-texto-de-un-elemento\"><a href=\"#valida-el-texto-de-un-elemento\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Valida el texto de un elemento</h3>\n<pre class=\"language-text\">ese elemento contiene el valor {text}</pre>\n<p>Comprueba que el elemento previamente seleccionado contiene un texto específico</p>\n<h4 id=\"ejemplos-6\"><a href=\"#ejemplos-6\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Ejemplos:</h4>\n<pre class=\"language-gherkin\">  <span class=\"token atrule\">Entonces</span> ese elemento contiene el valor <span class=\"token string\">'Accepted'</span></pre>\n<hr>\n<h3 id=\"valida-que-un-elemento-está-habilitado\"><a href=\"#valida-que-un-elemento-est%C3%A1-habilitado\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Valida que un elemento está habilitado</h3>\n<pre class=\"language-text\">ese elemento esta habilitado</pre>\n<p>Comprueba que el elemento previamente seleccionado está habilitado</p>\n<h4 id=\"ejemplos-7\"><a href=\"#ejemplos-7\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Ejemplos:</h4>\n<pre class=\"language-gherkin\">  <span class=\"token atrule\">Entonces</span> ese elemento esta habilitado</pre>\n<hr>\n<h3 id=\"valida-que-un-elemento-está-deshabilitado\"><a href=\"#valida-que-un-elemento-est%C3%A1-deshabilitado\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Valida que un elemento está deshabilitado</h3>\n<pre class=\"language-text\">ese elemento esta deshabilitado</pre>\n<p>Comprueba que el elemento previamente seleccionado está deshabilitado</p>\n<h4 id=\"ejemplos-8\"><a href=\"#ejemplos-8\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Ejemplos:</h4>\n<pre class=\"language-gherkin\">  <span class=\"token atrule\">Entonces</span> ese elemento esta deshabilitado</pre>\n<hr>\n<h3 id=\"validate-an-element-is-displayed\"><a href=\"#validate-an-element-is-displayed\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Validate an element is displayed</h3>\n<pre class=\"language-text\">ese elemento se muestra por pantalla</pre>\n<p>Comprueba que el elemento previamente seleccionado está siendo mostrado por pantalla</p>\n<h4 id=\"ejemplos-9\"><a href=\"#ejemplos-9\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Ejemplos:</h4>\n<pre class=\"language-gherkin\">  <span class=\"token atrule\">Entonces</span> ese elemento se muestra por pantalla</pre>\n<hr>\n<h3 id=\"validate-an-element-is-not-displayed\"><a href=\"#validate-an-element-is-not-displayed\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Validate an element is not displayed</h3>\n<pre class=\"language-text\">ese elemento no se muestra por pantalla</pre>\n<p>Comprueba que el elemento previamente seleccionado no está siendo mostrado por pantalla</p>\n<h4 id=\"ejemplos-10\"><a href=\"#ejemplos-10\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Ejemplos:</h4>\n<pre class=\"language-gherkin\">   <span class=\"token atrule\">Entonces</span> ese elemento no se muestra por pantalla</pre>\n<hr>\n<h3 id=\"emular-una-llamada-entrante\"><a href=\"#emular-una-llamada-entrante\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Emular una llamada entrante</h3>\n<pre class=\"language-text\">se recibe una llamada entrante con el numero {text}</pre>\n<p>Emula una llamada entrante de un número de teléfono específico. Solo disponible si la aplicación\na testear está siendo ejecutada en un dispositivo emulado.</p>\n<h4 id=\"ejemplos-11\"><a href=\"#ejemplos-11\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Ejemplos:</h4>\n<pre class=\"language-gherkin\">  <span class=\"token atrule\">Cuando</span> se recibe una llamada entrante con el numero <span class=\"token string\">'555-4324-432'</span></pre>\n<hr>\n<h3 id=\"aceptar-una-llamada-entrante\"><a href=\"#aceptar-una-llamada-entrante\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Aceptar una llamada entrante</h3>\n<pre class=\"language-text\">se acepta la llamada entrante</pre>\n<p>Acepta la llamada que está entrando en ese momento</p>\n<h4 id=\"ejemplos-12\"><a href=\"#ejemplos-12\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Ejemplos:</h4>\n<pre class=\"language-gherkin\">  <span class=\"token atrule\">Cuando</span> se acepta la llamada entrante</pre>\n<hr>\n<h3 id=\"rechazar-una-llamada-entrante\"><a href=\"#rechazar-una-llamada-entrante\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Rechazar una llamada entrante</h3>\n<pre class=\"language-text\">se rechaza la llamada entrante</pre>\n<p>Rechaza la llamada que está entrando en ese momento</p>\n<h4 id=\"ejemplos-13\"><a href=\"#ejemplos-13\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Ejemplos:</h4>\n<pre class=\"language-gherkin\">  <span class=\"token atrule\">Cuando</span> se rechaza la llamada entrante</pre>\n<hr>\n<h3 id=\"finaliza-la-llamada-actual\"><a href=\"#finaliza-la-llamada-actual\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Finaliza la llamada actual</h3>\n<pre class=\"language-text\">se finaliza la llamada</pre>\n<p>Finaliza (cuelga) la llamada actual</p>\n<h4 id=\"ejemplos-14\"><a href=\"#ejemplos-14\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Ejemplos:</h4>\n<pre class=\"language-gherkin\">  <span class=\"token atrule\">Cuando</span> se finaliza la llamada</pre>\n<h2 id=\"preparación-de-un-entorno-de-pruebas\"><a href=\"#preparaci%C3%B3n-de-un-entorno-de-pruebas\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Preparación de un entorno de pruebas</h2>\n<ol>\n<li>Instalar Android SDK</li>\n</ol>\n<pre class=\"language-text\">  sudo apt install android-sdk</pre>\n<ol start=\"2\">\n<li>Agregar la variable de entorno ANDROID_HOME</li>\n</ol>\n<pre class=\"language-text\">  (p.ej. $HOME/Android/Sdk )</pre>\n<ol start=\"3\">\n<li>Instalar cmdline-tools</li>\n</ol>\n<p><img src=\"/wakamiti//android-sdk.png\"></p>\n<ol start=\"5\">\n<li>Instalar Appium y Appium-doctor</li>\n</ol>\n<pre class=\"language-text\">   npm install -g appium\n   npm install @appium/doctor --location=global</pre>\n<ol start=\"4\">\n<li>Comprobar la instalación</li>\n</ol>\n<pre class=\"language-text\">appium-doctor --android</pre>\n<p>Todo deberia salir como OK, en caso contrario revisar los checks en rojo</p>\n<ol start=\"5\">\n<li>Arrancar el servidor Appium</li>\n</ol>\n<pre class=\"language-text\">appium</pre>\n<p>El puerto por defecto es 4723</p>\n<p>Descargar APK de prueba en:\n<a href=\"https://github.com/appium/appium/raw/1.x/sample-code/apps/ApiDemos-debug.apk\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://github.com/appium/appium/raw/1.x/sample-code/apps/ApiDemos-debug.apk</a></p>\n<ol start=\"6\">\n<li>Crear un dipositivo Virtual</li>\n</ol>\n<pre class=\"language-text\">$ANDROID_HOME/cmdline-tools/latest/bin/avdmanager create avd --force --name Nexus6P --abi google_apis_playstore/x86 --package &#39;system-images;android-30;google_apis_playstore;x86&#39; --device &quot;Nexus 6P&quot;```</pre>\n<ol start=\"7\">\n<li>Iniciar el emulador Android</li>\n</ol>\n<pre class=\"language-text\">$ANDROID_HOME/emulator/emulator -avd Nexus6P</pre>\n<p>Si en algun momento el emulador se queda pillado y dice que ya existe una emulacion en curso,\nse puede limpiar el estado con</p>\n<pre class=\"language-text\">$ANDROID_HOME/platform-tools/adb kill-server</pre>\n<p>Lo ideal seria poder lanzar todo esto de manera semiautomatica unicamente\na partir del APK, pero de momento hay que:</p>\n<ul>\n<li>Instalar Android Studio</li>\n<li>Crear dispositivo virtual (AVD) Por ejemplo Pixel 2 API 30 con Android 11</li>\n<li>Arrancar el AVD con el boton de play</li>\n</ul>\n"}},"context":{"id":"e9b93e5b6ef32cc0b4201bdc6dec7578","path":"/es/plugins/appium/","locale":"es"}}